I am not the original author of this Terraria Mod, but I have posted the code here for future reference.

Original Site - http://www.terrariaonline.com/threads/released-wip-silpm-mod.87651/